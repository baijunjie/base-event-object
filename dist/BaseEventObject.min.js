/*!
 * BaseEventObject - Base Event Object
 * @version v0.5.0
 * @author Junjie.Bai
 * @license MIT
 * 
 * git - git+https://github.com/baijunjie/base-event-object.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BaseEventObject=t():e.BaseEventObject=t()}(this,function(){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(r,c,e){var t,n,o;n=[c,e(1)],void 0===(o="function"==typeof(t=function(e,o){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o=(t=o)&&t.__esModule?t:{default:t};var n=function(){function r(e){var t,n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Object.defineProperties(this,{_onceEvents:{value:{},enumerable:!1},_callbackMap:{value:{},enumerable:!1},_onceCallbackMap:{value:{},enumerable:!1},once:{value:this.once.bind(this),enumerable:!0},on:{value:this.on.bind(this),enumerable:!0},off:{value:this.off.bind(this),enumerable:!0},emit:{value:this.emit.bind(this),enumerable:!0}}),"string"==typeof e)t={events:e.split(" ")};else if(u(e))t={events:e};else{if("object"!==b(e))throw new Error("Invalid parameter.");t=e}"string"==typeof t.events&&(t.events=[t.events]),"string"==typeof t.onceEvents&&(t.onceEvents=t.onceEvents.split(" ")),u(t.events)&&t.events.forEach(function(e){n._callbackMap[e]=[],n._onceCallbackMap[e]=new o.default}),u(t.onceEvents)&&t.onceEvents.forEach(function(e){n._onceEvents[e]=null,n._callbackMap[e]=[],n._onceCallbackMap[e]=new o.default})}return e=r,(t=[{key:"on",value:function(e,n,r){var o=this;if("string"!=typeof e)throw new Error("The event type must be a string.");var a=[];return e.split(" ").forEach(function(e){var t=function(e,t){if(!this._callbackMap[e])throw new Error('Event type "'.concat(e,'" does not exist.'));if("function"!=typeof t)throw new Error("Missing event handler.");if(!this._onceEvents[e]){var n=this._callbackMap[e];return n.indexOf(t)<0&&n.push(t),function(){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}t.call.apply(t,[this,{type:e}].concat(i(this._onceEvents[e])))}.call(o,e,n);t&&(a.push(t),r&&o._onceCallbackMap[e].set(n,t))}),function(){a.forEach(function(e){return e()})}}},{key:"once",value:function(e,t){this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?e.split(" ").forEach(function(e){l.call(n,e,t)}):l.call(this,e,t)}},{key:"emit",value:function(n){for(var r=this,e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];if(!this._callbackMap[n])throw new Error('Event type "'.concat(n,'" does not exist.'));var a=this._callbackMap[n].concat();null===this._onceEvents[n]&&(this._onceEvents[n]=o,this._callbackMap[n].length=0);var i=this._onceCallbackMap[n];a.forEach(function(e){e.call.apply(e,[r,{type:n}].concat(o));var t=i.get(e);t&&(t(),i.delete(e))})}}])&&a(e.prototype,t),n&&a(e,n),r;var e,t,n}();function l(e,t){var n,r,o,a,i=b(e);if("undefined"!==i){if("function"===i)t=e,n=this._callbackMap;else{if("string"!==i)return;if(!this._callbackMap[e])return;if(r={},o=e,a=this._callbackMap[e],o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n=r,void 0===t)return void(n[e].length=0)}for(var l,u=0,c=Object.values(n);u<c.length;u++){var f=c[u];0<=(l=f.indexOf(t))&&f.splice(l,1)}}else for(var s=0,p=Object.values(this._callbackMap);s<p.length;s++){var v=p[s];v.length=0}}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}e.default=n,r.exports=c.default})?t.apply(c,n):t)||(r.exports=o)},function(n,r,e){var t,o,a;o=[r],void 0===(a="function"==typeof(t=function(e){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=[]}return t=e,(n=[{key:"has",value:function(t){return this._value.some(function(e){return e.key===t})}},{key:"set",value:function(t,n){return this._value.some(function(e){if(e.key===t)return e.value=n,!0})||this._value.push({key:t,value:n}),this}},{key:"get",value:function(t){var n;return this._value.some(function(e){if(e.key===t)return n=e.value,!0}),n}},{key:"delete",value:function(n){var r=this;return this._value.some(function(e,t){if(e.key===n)return r._value.splice(t,1),!0}),this}}])&&o(t.prototype,n),r&&o(t,r),e;var t,n,r}();e.default=t,n.exports=r.default})?t.apply(r,o):t)||(n.exports=a)}])});